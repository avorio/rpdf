<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head>
 


 
 
 


 <link rel="icon" type="image/vnd.microsoft.icon" href="http://www.gstatic.com/codesite/ph/images/phosting.ico">
 
 <script type="text/javascript">
 
 
 
 var codesite_token = null;
 
 
 var logged_in_user_email = null;
 
 
 var relative_base_url = "";
 
 </script>
 
 
 <title>Using - 
 ocropus -
 
 A short introduction to using and training OCRopus. - Project Hosting on Google Code</title>
 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
 
 <link type="text/css" rel="stylesheet" href="Using_files/ph_core.css">
 
 <link type="text/css" rel="stylesheet" href="Using_files/ph_detail.css">
 
 
 
 <link type="application/atom+xml" rel="alternate" href="http://code.google.com/feeds/p/ocropus/hgchanges/basic?repo=wiki&amp;path=/Using.wiki">
 
 
<!--[if IE]>
 <link type="text/css" rel="stylesheet" href="http://www.gstatic.com/codesite/ph/11982002900633812604/css/d_ie.css" >
<![endif]-->
 <style type="text/css">
 .menuIcon.off { background: no-repeat url(http://www.gstatic.com/codesite/ph/images/dropdown_sprite.gif) 0 -42px }
 .menuIcon.on { background: no-repeat url(http://www.gstatic.com/codesite/ph/images/dropdown_sprite.gif) 0 -28px }
 .menuIcon.down { background: no-repeat url(http://www.gstatic.com/codesite/ph/images/dropdown_sprite.gif) 0 0; }
 </style>
<script src="Using_files/ga.js" type="text/javascript"></script></head><body class="t6">
 <script type="text/javascript">
 var _gaq = _gaq || [];
 _gaq.push(
 ['siteTracker._setAccount', 'UA-18071-1'],
 ['siteTracker._trackPageview']);
 
 _gaq.push(
 ['projectTracker._setAccount', 'UA-1807967-2'],
 ['projectTracker._trackPageview']);
 
 (function() {
 var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
 ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
 (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
 })();
 </script>
 <div id="gaia">
 
 <span>
 
 
 <a href="#" id="projects-dropdown" onclick="return false;"><u>My favorites</u> <small>▼</small></a>
 
 | <a href="https://www.google.com/accounts/ServiceLogin?service=code&amp;ltmpl=phosting&amp;continue=http%3A%2F%2Fcode.google.com%2Fp%2Focropus%2Fwiki%2FUsing&amp;followup=http%3A%2F%2Fcode.google.com%2Fp%2Focropus%2Fwiki%2FUsing" onclick="_CS_click('/gb/ph/signin');"><u>Sign in</u></a>
 
 </span>

 </div>
 <div class="gbh" style="left: 0pt;"></div>
 <div class="gbh" style="right: 0pt;"></div>
 
 
 <div style="height: 1px;"></div>
<!--[if IE 6]>
<div style="text-align:center;">
Support browsers that contribute to open source, try <a href="http://www.firefox.com">Firefox</a> or <a href="http://www.google.com/chrome">Google Chrome</a>.
</div>
<![endif]-->



 <table style="margin: 20px 0px 0px; padding: 0px; width: 100%;" cellpadding="0" cellspacing="0">
 <tbody><tr style="height: 58px;">
 
 <td style="width: 55px; text-align: center;">
 <a href="http://code.google.com/p/ocropus/">
 
 
 
 <img src="Using_files/logo" alt="Logo">
 
 
 </a>
 </td>
 
 <td style="padding-left: 0.5em;">
 
 <div id="pname" style="margin: 0px 0px -3px;">
 <a href="http://code.google.com/p/ocropus/" style="text-decoration: none; color: rgb(0, 0, 0);">ocropus</a>
 
 </div>
 <div id="psum">
 <i><a id="project_summary_link" href="http://code.google.com/p/ocropus/" style="text-decoration: none; color: rgb(0, 0, 0);">The OCRopus(tm) open source document analysis and OCR system</a></i>
 </div>
 
 </td>
 <td style="white-space: nowrap; text-align: right;">
 <form action="/hosting/search">
 <input size="30" name="q">
 <input name="projectsearch" value="Search projects" type="submit">
 </form>
 </td></tr>
 </tbody></table>


 
<table id="mt" width="100%" border="0" cellpadding="0" cellspacing="0">
 <tbody><tr>
 <th onclick="if (!cancelBubble) _go('/p/ocropus/');">
 <div class="tab inactive">
 <div class="round4"></div>
 <div class="round2"></div>
 <div class="round1"></div>
 <div class="box-inner">
 <a onclick="cancelBubble=true;" href="http://code.google.com/p/ocropus/">Project&nbsp;Home</a>
 </div>
 </div>
 </th><td>&nbsp;&nbsp;</td>
 
 
 
 
 <th onclick="if (!cancelBubble) _go('/p/ocropus/downloads/list');">
 <div class="tab inactive">
 <div class="round4"></div>
 <div class="round2"></div>
 <div class="round1"></div>
 <div class="box-inner">
 <a onclick="cancelBubble=true;" href="http://code.google.com/p/ocropus/downloads/list">Downloads</a>
 </div>
 </div>
 </th><td>&nbsp;&nbsp;</td>
 
 
 
 
 
 <th onclick="if (!cancelBubble) _go('/p/ocropus/w/list');">
 <div class="tab active">
 <div class="round4"></div>
 <div class="round2"></div>
 <div class="round1"></div>
 <div class="box-inner">
 <a onclick="cancelBubble=true;" href="http://code.google.com/p/ocropus/w/list">Wiki</a>
 </div>
 </div>
 </th><td>&nbsp;&nbsp;</td>
 
 
 
 
 
 <th onclick="if (!cancelBubble) _go('/p/ocropus/issues/list');">
 <div class="tab inactive">
 <div class="round4"></div>
 <div class="round2"></div>
 <div class="round1"></div>
 <div class="box-inner">
 <a onclick="cancelBubble=true;" href="http://code.google.com/p/ocropus/issues/list">Issues</a>
 </div>
 </div>
 </th><td>&nbsp;&nbsp;</td>
 
 
 
 
 
 <th onclick="if (!cancelBubble) _go('/p/ocropus/source/checkout');">
 <div class="tab inactive">
 <div class="round4"></div>
 <div class="round2"></div>
 <div class="round1"></div>
 <div class="box-inner">
 <a onclick="cancelBubble=true;" href="http://code.google.com/p/ocropus/source/checkout">Source</a>
 </div>
 </div>
 </th><td>&nbsp;&nbsp;</td>
 
 
 <td width="100%">&nbsp;</td>
 </tr>
</tbody></table>
<table class="st" width="100%" align="center" border="0" cellpadding="0" cellspacing="0">
 <tbody><tr>
 
 
 
 <td>
 <div class="issueDetail">
<div class="isf">
 
 <span class="inIssueList"> 
 <span>Search</span>
 <form action="/p/ocropus/w/list" method="GET" style="display: inline;">
 <select id="can" name="can" style="font-size: 92%;">
 <option disabled="disabled">Search within:</option>
 
 <option value="1">&nbsp;All wiki pages</option>
 <option value="3">&nbsp;Featured pages</option>
 <option value="2" selected="selected">&nbsp;Current pages</option>
 
 
 <option value="4">&nbsp;Deprecated pages</option>
 
 </select>
 <span>for</span>
 <span id="qq"><input size="38" id="q" name="q" style="font-size: 92%;" type="text"></span>
 
 
 <input value="Search" style="font-size: 92%;" type="submit">
 </form>
 </span>

 
 
 
 
 
 
 

</div>
</div>

 </td>
 
 
 
 
 
 
 <td class="bevel-right" height="4" valign="top" align="right">
 <div class="round4"></div>
 <div class="round2"></div>
 <div class="round1"></div>
 </td>
 </tr>
</tbody></table>
<script type="text/javascript">
 var cancelBubble = false;
 function _go(url) { document.location = url; }
</script>


<div id="maincol">

 
<!-- IE -->







 <style type="text/css">
 .artifactcomment, #commentform {
 margin: .5em 0 0 0;
 padding: .3em 0 .3em .3em;
 border-top: 3px solid #c3d9ff;
 }
 #commentform { padding-top: 1em; }
 .delcom { background: #e8e8e8 }
 .commentcontent { margin: 1em 0;}
 </style>


 <div id="wikicontent">
 <table width="100%" border="0" cellpadding="0" cellspacing="0">
 <tbody><tr>
 
 <td class="vt" id="wikimaincol" width="100%">
 
 <div style="float: right; width: 18em;" id="wikimeta">
 <div class="pmeta_bubble_bg">
 <div class="round4"></div>
 <div class="round2"></div>
 <div class="round1"></div>
 <div class="box-inner">
 <table style="padding: 5px;">
 <tbody><tr><td colspan="2" style="padding-bottom: 5px;">Updated <span title="Mon Aug 10 22:30:50 2009">Aug 10, 2009</span>
 
 by <a style="white-space: nowrap;" href="http://code.google.com/u/@UhRVRVVXAxhDVwh0/">tmb...@gmail.com</a>
 </td></tr>
 
 
 
 </tbody></table>
 </div>
 <div class="round1"></div>
 <div class="round2"></div>
 <div class="round4"></div>
 </div>
 </div>
 
 <div id="wikiheader" style="margin-bottom: 1em;">
 
 <span style="font-size: 120%; font-weight: bold;">Using</span>
 &nbsp;
 
 
 <div style="font-style: italic; margin-top: 3px;">A short introduction to using and training OCRopus.</div>
 
 </div>
 <p><i>Note: this user manual contains text blocks from papers submitted to the MOCR '09 workshop and the ACM DocEng '09 workshops.</i> </p><h1><a name="Getting_Started">Getting Started</a></h1><p><a name="Getting_Started">The </a><a href="http://code.google.com/p/ocropus/wiki/DevInstall">DevInstall</a>
page contains an example of page recognition and of book-level
recognition. Also see the Book Level Recognition section below. </p><p>There is a short example for doing training on the <a href="http://code.google.com/p/ocropus/wiki/Training">Training</a> page. </p><h1><a name="Components">Components</a></h1><p><a name="Components">Different
languages and document types have different requirements in terms of
preprocessing, cleanup, layout analysis, OCR, and language modeling.
These requirements are addressed by a growing set of different
components. </a></p><p><a name="Components">We had originally hoped to
be able to handle this through a top-level scripting interface, but
found that the ability to instantiate, load, and save components was
needed in many different places within the OCRopus system. Existing,
portable component models (such as Mozilla’s) were both heavy-weight
and did not address the needs of OCRopus very well. </a></p><p><a name="Components">We
therefore introduced a simple component model for OCRopus. The model is
implemented by deriving from the IComponent base class. This provides
both a standard set of interfaces, as well as some common component
functionality. Most importantly, the component model allows components
to be saved to a stream, loaded from a stream, and instantiated by
name. </a></p><p><a name="Components">In addition, many document
analysis algorithms are dependent on parameters. Adapting and tuning
those algorithms involves extensive experimentation with different
parameter values. The new component model allows parameters to be set,
both on a per-component basis and globally (via the environment).
Parameter settings for a particular component are saved and loaded
along with the component, and they can be inspected from the command
line easily. </a></p><p><a name="Components">Finally, each component
can optionally accept commands via a simple method that takes an array
of string arguments and returns a string result. This command interface
is useful for sending component-specific commands (e.g., for debugging)
without having to define a complex class hierarchy with many rarely
used methods. The command method provides a simple form of duck typing
and dynamic object oriented programming. </a></p><p><a name="Components">At the C++ level, a "component" is basically a C++ object that implements the <tt>IComponent</tt> interface. </a></p><p><a name="Components">There are several command line tools for dealing with OCRopus components: </a></p><ul><li><a name="Components">ocropus components </a></li><ul><li><a name="Components">list available components (of any type) in the system </a></li></ul><li><a name="Components">ocropus params component </a></li><ul><li><a name="Components">output the available parameters for the given component </a></li></ul><li><a name="Components">ocropus cinfo model </a></li><ul><li><a name="Components">load the classifier model and print information on it </a></li></ul></ul><p><a name="Components">The parameters that <tt>ocropus params</tt>
lists can be set from the environment. When you set parameters from the
environment, they apply to all instances of that component (this is
usually not a problem). </a></p><p><a name="Components">When a component has been saved, you can obtain infromation on it with the <tt>ocropus cinfo</tt> command.  Note that some older "character shape models" (instances of <tt>IRecognizeLine</tt>) are not saved as components, so <tt>cinfo</tt> does not work on them. </a></p><p><a name="Components">To obtain information about language models, use the OpenFST tools, e.g., <tt>fstprint</tt>. </a></p><h1><a name="Book-Level_Recognition">Book-Level Recognition</a></h1><p><a name="Book-Level_Recognition">Although
OCRopus can recognize individual pages (or even text lines or isolated
characters), a major design goal in OCRopus has been to support
book-level recognition. Book-level recognition can achieve reductions
in OCR error rates by taking into account regularities in font,
degradation, style, and layout across an entire book. </a></p><p><a name="Book-Level_Recognition">To
support book-level processing, starting with OCRopus 0.4, OCRopus has a
standard representation for entire books. This book-level
representation is a directory containing various files and
subdirectories representing inputs, intermediate processing results,
and the final output of recognition stages. This representation is
created and manipulated using a number of command line tools that are
executed in sequence in order to achieve book-level recognition and
adaptation: </a></p><ul><li><a name="Book-Level_Recognition">ocropus book2pages dir book.tif  </a></li><ul><li><a name="Book-Level_Recognition">Loads the pages of the book.tif input file into the book-level processing directory dir </a></li></ul><li><a name="Book-Level_Recognition">ocropus pages2lines dir  </a></li><ul><li><a name="Book-Level_Recognition">Performs layout analysis on the pages stored in dir and outputs images corresponding to individual text lines. </a></li></ul><li><a name="Book-Level_Recognition">ocropus lines2fsts dir  </a></li><ul><li><a name="Book-Level_Recognition">Performs
character recognition on the text lines found in dir and outputs
recognition lattices corresponding to recognition alternatives for
recognizing the text lines in dir. </a></li></ul><li><a name="Book-Level_Recognition">ocropus fsts2text dir  </a></li><ul><li><a name="Book-Level_Recognition">Applies a statistical language model to the recognition lattices in dir and outputs the optimal textual transcriptions. </a></li></ul><li><a name="Book-Level_Recognition">ocropus buildhtml dir  </a></li><ul><li><a name="Book-Level_Recognition">Computes
the final (X)HTML output from the book level recognition process,
embedding OCR-related information using the hOCR microformat. </a></li></ul></ul><p><a name="Book-Level_Recognition">These
steps reflect the strictly no-backtracking architecture of OCRopus;
that is, each processing step outputs a complete representation of all
possible interpretations of the input to the next processing step. </a></p><p><a name="Book-Level_Recognition">The
directory tree dir containing the intermediate processing results and
represents the only information passed between different processing
stages. The general structure of this directory tree is as a two-level
hierarchy; the first level represents the pages of the input document,
while the second level represents individual text lines and figures.
The data relevant to line 17 on (physical) page 5 is stored in the
following locations: </a></p><ul><li><a name="Book-Level_Recognition">dir/0005.png Image of page 5. </a></li><li><a name="Book-Level_Recognition">dir/0005.pseg.png Pixel-level segmentation of page 5 into text-lines, figures, and other page components. </a></li><li><a name="Book-Level_Recognition">dir/0005/0017.png Image of text line 17 on page 5. </a></li><li><a name="Book-Level_Recognition">dir/0005/0017.rseg.png Raw segmentation (oversegmentation) of text line 17 on page 5. </a></li><li><a name="Book-Level_Recognition">dir/0005/0017.cseg.png Character-accurate segmentation of text line 17 on page 5. </a></li><li><a name="Book-Level_Recognition">dir/0005/0017.fst Recognition lattice for text line 17 on page 5. </a></li><li><a name="Book-Level_Recognition">dir/0005/0017.txt UTF-8 encoded Unicode string corresponding to cseg file. </a></li></ul><p><a name="Book-Level_Recognition">Note
that there is only a small number of data types (PNG images, Unicode
strings, recognition lattices). The recognition lattices themselves are
stored in OpenFST format (www.openfst.org) and can be manipulated with
standard OpenFST tools. </a></p><p><a name="Book-Level_Recognition">This
intermediate representation makes it easy to write command line tools
implementing various processing stages. For example, an alternative
text line recognizer can be substituted for the standard OCRopus
recognizer simply by running it over each of the segmented text lines: </a></p><pre class="prettyprint"><a name="Book-Level_Recognition"><span class="kwd">for</span><span class="pln"> line </span><span class="kwd">in</span><span class="pln"> dir</span><span class="pun">/????/????.</span><span class="pln">png</span><span class="pun">;</span><span class="pln"> </span><span class="kwd">do</span><span class="pln"><br>&nbsp;</span><span class="kwd">my</span><span class="pun">-</span><span class="pln">recognizer $line </span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">\</span><span class="pln"><br>&nbsp; &nbsp; &nbsp;$</span><span class="pun">(</span><span class="pln">echo $line </span><span class="pun">|</span><span class="pln"> sed </span><span class="str">'s/png$/txt/'</span><span class="pun">)</span><span class="pln"><br></span><span class="kwd">done</span></a></pre><p><a name="Book-Level_Recognition">The
representation also makes it easy to write visualization, ground
truthing, and correction tools. For example, a text line transcription
tool consists of performing the layout analysis step and computing the
text line images, then presenting the user with each text line and
asking for a transcription to be input. </a></p><p><a name="Book-Level_Recognition">Although
this representation involves reading and writing many files during
processing, we have observed the the overhead of this to small compared
to the actual recognition process, at least if the directory tree is
stored on a local disk. </a></p><p><a name="Book-Level_Recognition">The
overall output from the system is in hOCR format, a format that is
fully (X)HTML-compliant, but also embeds geometric and other
OCR-related information invisibly inside SPAN and DIV tags. The design
of the hOCR format provides full, standard support for all common
typographic phenomena through the existing HTML and CSS standards, is
compatible with existing indexing and search engines, and yet also
includes all the information typically required for OCR processing and
post-processing. </a></p>
<a name="Book-Level_Recognition"> </a></td> 
 </tr>
 </tbody></table>
 </div>


 
 <br>
 <div id="commentlist">
 


 
 
 
 
 
 
 

<div class="collapse">


 

 

 

</div>

 <script type="text/javascript">
 function delComment(sequence_num, delete_mode) {
 var f = document.forms["delcom"];
 f.sequence_num.value = sequence_num;
 f.mode.value = delete_mode;
 f.submit();
 return false;
 }
 </script>


 </div>
 
 
 
 
 <br>
 <div class="artifactcomment">
 <span class="indicator">►</span> <a href="https://www.google.com/accounts/ServiceLogin?service=code&amp;ltmpl=phosting&amp;continue=http%3A%2F%2Fcode.google.com%2Fp%2Focropus%2Fwiki%2FUsing&amp;followup=http%3A%2F%2Fcode.google.com%2Fp%2Focropus%2Fwiki%2FUsing">Sign in</a> to add a comment
 </div>
 
 

<form name="delcom" action="../w/delComment.do" method="POST">
 <input name="sequence_num" value="" type="hidden">
 <input name="mode" value="" type="hidden">
 <input name="pagename" value="Using" type="hidden">
 <input name="token" value="" type="hidden">
</form>



<script src="Using_files/prettify.js"></script>
<script type="text/javascript">
 prettyPrint();
</script>
<script type="text/javascript" src="Using_files/dit_scripts_20081013.js"></script>



  
 
 <script type="text/javascript" src="Using_files/core_scripts_20081103.js"></script>
 <script type="text/javascript" src="Using_files/codesite_product_dictionary_ph.js"></script>
 </div>
<div id="footer" dir="ltr">
 
 <div class="text">
 
 ©2010 Google -
 <a href="http://code.google.com/projecthosting/terms.html">Terms</a> -
 <a href="http://www.google.com/privacy.html">Privacy</a> -
 <a href="http://code.google.com/p/support/">Project Hosting Help</a>
 
 </div>
</div>

 <div class="hostedBy" style="margin-top: -20px;">
 <span style="vertical-align: top;">Powered by <a href="http://code.google.com/projecthosting/">Google Project Hosting</a></span>
 </div>
 
 


 
 <div style="display: none;" id="menuDiv-projects-dropdown" class="menuDiv instance0"><div class="menuCategory controls"><a href="http://www.google.com/accounts/ServiceLogin?service=code&amp;ltmpl=phosting&amp;continue=http%3A%2F%2Fcode.google.com%2Fp%2Focropus%2Fwiki%2FUsing&amp;amp;followup=http%3A%2F%2Fcode.google.com%2Fp%2Focropus%2Fwiki%2FUsing" style="display: block;" class="menuItem">Sign in to see your favorites</a><hr class="menuSeparator"><a href="http://code.google.com/more/" style="display: block;" class="menuItem">Find developer products...</a><a href="http://code.google.com/hosting/" style="display: block;" class="menuItem">Find open source projects...</a></div></div></body></html>