<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head>
 


 
 
 


 <link rel="icon" type="image/vnd.microsoft.icon" href="http://www.gstatic.com/codesite/ph/images/phosting.ico">
 
 <script type="text/javascript">
 
 
 
 var codesite_token = null;
 
 
 var logged_in_user_email = null;
 
 
 var relative_base_url = "";
 
 </script>
 
 
 <title>LibraryReference - 
 ocropus -
 
 Python Library Reference - Project Hosting on Google Code</title>
 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
 
 <link type="text/css" rel="stylesheet" href="LibraryReference_files/ph_core.css">
 
 <link type="text/css" rel="stylesheet" href="LibraryReference_files/ph_detail.css">
 
 
 
 <link type="application/atom+xml" rel="alternate" href="http://code.google.com/feeds/p/ocropus/hgchanges/basic?repo=wiki&amp;path=/LibraryReference.wiki">
 
 
<!--[if IE]>
 <link type="text/css" rel="stylesheet" href="http://www.gstatic.com/codesite/ph/11982002900633812604/css/d_ie.css" >
<![endif]-->
 <style type="text/css">
 .menuIcon.off { background: no-repeat url(http://www.gstatic.com/codesite/ph/images/dropdown_sprite.gif) 0 -42px }
 .menuIcon.on { background: no-repeat url(http://www.gstatic.com/codesite/ph/images/dropdown_sprite.gif) 0 -28px }
 .menuIcon.down { background: no-repeat url(http://www.gstatic.com/codesite/ph/images/dropdown_sprite.gif) 0 0; }
 </style>
<script src="LibraryReference_files/ga.js" type="text/javascript"></script></head><body class="t6">
 <script type="text/javascript">
 var _gaq = _gaq || [];
 _gaq.push(
 ['siteTracker._setAccount', 'UA-18071-1'],
 ['siteTracker._trackPageview']);
 
 _gaq.push(
 ['projectTracker._setAccount', 'UA-1807967-2'],
 ['projectTracker._trackPageview']);
 
 (function() {
 var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
 ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
 (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
 })();
 </script>
 <div id="gaia">
 
 <span>
 
 
 <a href="#" id="projects-dropdown" onclick="return false;"><u>My favorites</u> <small>â–¼</small></a>
 
 | <a href="https://www.google.com/accounts/ServiceLogin?service=code&amp;ltmpl=phosting&amp;continue=http%3A%2F%2Fcode.google.com%2Fp%2Focropus%2Fwiki%2FLibraryReference&amp;followup=http%3A%2F%2Fcode.google.com%2Fp%2Focropus%2Fwiki%2FLibraryReference" onclick="_CS_click('/gb/ph/signin');"><u>Sign in</u></a>
 
 </span>

 </div>
 <div class="gbh" style="left: 0pt;"></div>
 <div class="gbh" style="right: 0pt;"></div>
 
 
 <div style="height: 1px;"></div>
<!--[if IE 6]>
<div style="text-align:center;">
Support browsers that contribute to open source, try <a href="http://www.firefox.com">Firefox</a> or <a href="http://www.google.com/chrome">Google Chrome</a>.
</div>
<![endif]-->



 <table style="margin: 20px 0px 0px; padding: 0px; width: 100%;" cellpadding="0" cellspacing="0">
 <tbody><tr style="height: 58px;">
 
 <td style="width: 55px; text-align: center;">
 <a href="http://code.google.com/p/ocropus/">
 
 
 
 <img src="LibraryReference_files/logo" alt="Logo">
 
 
 </a>
 </td>
 
 <td style="padding-left: 0.5em;">
 
 <div id="pname" style="margin: 0px 0px -3px;">
 <a href="http://code.google.com/p/ocropus/" style="text-decoration: none; color: rgb(0, 0, 0);">ocropus</a>
 
 </div>
 <div id="psum">
 <i><a id="project_summary_link" href="http://code.google.com/p/ocropus/" style="text-decoration: none; color: rgb(0, 0, 0);">The OCRopus(tm) open source document analysis and OCR system</a></i>
 </div>
 
 </td>
 <td style="white-space: nowrap; text-align: right;">
 <form action="/hosting/search">
 <input size="30" name="q">
 <input name="projectsearch" value="Search projects" type="submit">
 </form>
 </td></tr>
 </tbody></table>


 
<table id="mt" width="100%" border="0" cellpadding="0" cellspacing="0">
 <tbody><tr>
 <th onclick="if (!cancelBubble) _go('/p/ocropus/');">
 <div class="tab inactive">
 <div class="round4"></div>
 <div class="round2"></div>
 <div class="round1"></div>
 <div class="box-inner">
 <a onclick="cancelBubble=true;" href="http://code.google.com/p/ocropus/">Project&nbsp;Home</a>
 </div>
 </div>
 </th><td>&nbsp;&nbsp;</td>
 
 
 
 
 <th onclick="if (!cancelBubble) _go('/p/ocropus/downloads/list');">
 <div class="tab inactive">
 <div class="round4"></div>
 <div class="round2"></div>
 <div class="round1"></div>
 <div class="box-inner">
 <a onclick="cancelBubble=true;" href="http://code.google.com/p/ocropus/downloads/list">Downloads</a>
 </div>
 </div>
 </th><td>&nbsp;&nbsp;</td>
 
 
 
 
 
 <th onclick="if (!cancelBubble) _go('/p/ocropus/w/list');">
 <div class="tab active">
 <div class="round4"></div>
 <div class="round2"></div>
 <div class="round1"></div>
 <div class="box-inner">
 <a onclick="cancelBubble=true;" href="http://code.google.com/p/ocropus/w/list">Wiki</a>
 </div>
 </div>
 </th><td>&nbsp;&nbsp;</td>
 
 
 
 
 
 <th onclick="if (!cancelBubble) _go('/p/ocropus/issues/list');">
 <div class="tab inactive">
 <div class="round4"></div>
 <div class="round2"></div>
 <div class="round1"></div>
 <div class="box-inner">
 <a onclick="cancelBubble=true;" href="http://code.google.com/p/ocropus/issues/list">Issues</a>
 </div>
 </div>
 </th><td>&nbsp;&nbsp;</td>
 
 
 
 
 
 <th onclick="if (!cancelBubble) _go('/p/ocropus/source/checkout');">
 <div class="tab inactive">
 <div class="round4"></div>
 <div class="round2"></div>
 <div class="round1"></div>
 <div class="box-inner">
 <a onclick="cancelBubble=true;" href="http://code.google.com/p/ocropus/source/checkout">Source</a>
 </div>
 </div>
 </th><td>&nbsp;&nbsp;</td>
 
 
 <td width="100%">&nbsp;</td>
 </tr>
</tbody></table>
<table class="st" width="100%" align="center" border="0" cellpadding="0" cellspacing="0">
 <tbody><tr>
 
 
 
 <td>
 <div class="issueDetail">
<div class="isf">
 
 <span class="inIssueList"> 
 <span>Search</span>
 <form action="/p/ocropus/w/list" method="GET" style="display: inline;">
 <select id="can" name="can" style="font-size: 92%;">
 <option disabled="disabled">Search within:</option>
 
 <option value="1">&nbsp;All wiki pages</option>
 <option value="3">&nbsp;Featured pages</option>
 <option value="2" selected="selected">&nbsp;Current pages</option>
 
 
 <option value="4">&nbsp;Deprecated pages</option>
 
 </select>
 <span>for</span>
 <span id="qq"><input size="38" id="q" name="q" style="font-size: 92%;" type="text"></span>
 
 
 <input value="Search" style="font-size: 92%;" type="submit">
 </form>
 </span>

 
 
 
 
 
 
 

</div>
</div>

 </td>
 
 
 
 
 
 
 <td class="bevel-right" height="4" valign="top" align="right">
 <div class="round4"></div>
 <div class="round2"></div>
 <div class="round1"></div>
 </td>
 </tr>
</tbody></table>
<script type="text/javascript">
 var cancelBubble = false;
 function _go(url) { document.location = url; }
</script>


<div id="maincol">

 
<!-- IE -->







 <style type="text/css">
 .artifactcomment, #commentform {
 margin: .5em 0 0 0;
 padding: .3em 0 .3em .3em;
 border-top: 3px solid #c3d9ff;
 }
 #commentform { padding-top: 1em; }
 .delcom { background: #e8e8e8 }
 .commentcontent { margin: 1em 0;}
 </style>


 <div id="wikicontent">
 <table width="100%" border="0" cellpadding="0" cellspacing="0">
 <tbody><tr>
 
 <td class="vt" id="wikimaincol" width="100%">
 
 <div style="float: right; width: 18em;" id="wikimeta">
 <div class="pmeta_bubble_bg">
 <div class="round4"></div>
 <div class="round2"></div>
 <div class="round1"></div>
 <div class="box-inner">
 <table style="padding: 5px;">
 <tbody><tr><td colspan="2" style="padding-bottom: 5px;">Updated <span title="Sun Mar 28 02:52:58 2010">Mar 28, 2010</span>
 
 by <a style="white-space: nowrap;" href="http://code.google.com/u/@UhRVRVVXAxhDVwh0/">tmb...@gmail.com</a>
 </td></tr>
 
 
 
 </tbody></table>
 </div>
 <div class="round1"></div>
 <div class="round2"></div>
 <div class="round4"></div>
 </div>
 </div>
 
 <div id="wikiheader" style="margin-bottom: 1em;">
 
 <span style="font-size: 120%; font-weight: bold;">LibraryReference</span>
 &nbsp;
 
 
 <div style="font-style: italic; margin-top: 3px;">Python Library Reference</div>
 
 </div>
 <h1><a name="The_IULIB_/_OCRopus_Core_Library">The IULIB / OCRopus Core Library</a></h1><p><a name="The_IULIB_/_OCRopus_Core_Library">This
page only covers the core datatypes and some image processing
functions. For the OCR-related components, please see OcrComponents. </a></p><h2><a name="Background">Background</a></h2><p><a name="Background">OCRopus
was originally written entirely in C++, with Lua being used for
configuration. However, over time, people started writing more and more
complicated Lua scripts, which became harder and harder to maintain. It
also became difficult to integrate with a lot of other image processing
software, which is often written in Python. </a></p><p><a name="Background">Since
OCRopus version 0.4, the primary scripting language for OCRopus is
therefore Python, and since version 0.4.4, all command line tools are
available as Python scripts as well, making them easier to modify (the
C++ command line tools are still available). </a></p><p><a name="Background">The
C++ functions in OCRopus are connected with Python through a tool
called Swig. For the most part, Swig translates between C++ and Python
quite transparently. In addition to the "raw" Swig interfaces, there
are also Python helper functions that make the C++ interfaces a bit
more convenient from Python. </a></p><h2><a name="Simple_Example">Simple Example</a></h2><p><a name="Simple_Example">All the OCRopus C++ and Python classes and functions are available in the <tt>ocropy</tt> package.  A short script illustrating this is: </a></p><pre class="prettyprint"><a name="Simple_Example"><span class="kwd">import</span><span class="pln"> ocropy<br>image </span><span class="pun">=</span><span class="pln"> ocropy</span><span class="pun">.</span><span class="pln">bytearray</span><span class="pun">()</span><span class="pln"><br>image</span><span class="pun">.</span><span class="pln">readGray</span><span class="pun">(</span><span class="str">"test.jpg"</span><span class="pun">)</span><span class="pln"><br>image</span><span class="pun">.</span><span class="pln">gauss</span><span class="pun">(</span><span class="lit">3.0</span><span class="pun">)</span><span class="pln"><br>image</span><span class="pun">.</span><span class="pln">writeGray</span><span class="pun">(</span><span class="str">"output.png"</span><span class="pun">)</span></a></pre><h2><a name="Connecting_with">Connecting with NumPy</a></h2><p><a name="Connecting_with">You
can do a significant amount of image processing in the OCRopus library,
but the library wasn't originally intended to be used from a dynamic
scripting language; when writing Python code, you may find it more
convenient to switch to NumPy when necessary: </a></p><pre class="prettyprint"><a name="Connecting_with"><span class="kwd">import</span><span class="pln"> ocropy<br></span><span class="kwd">from</span><span class="pln"> scipy</span><span class="pun">.</span><span class="pln">ndimage </span><span class="kwd">import</span><span class="pln"> filters<br><br></span><span class="com"># read using OCRopus</span><span class="pln"><br>image </span><span class="pun">=</span><span class="pln"> ocropy</span><span class="pun">.</span><span class="pln">bytearray</span><span class="pun">()</span><span class="pln"><br>image</span><span class="pun">.</span><span class="pln">readGray</span><span class="pun">(</span><span class="str">"test.jpg"</span><span class="pun">)</span><span class="pln"><br><br></span><span class="com"># convert to NumPy</span><span class="pln"><br>a </span><span class="pun">=</span><span class="pln"> image</span><span class="pun">.</span><span class="pln">numpyI</span><span class="pun">()</span><span class="pln"><br><br></span><span class="com"># apply NumPy algorithm</span><span class="pln"><br>a </span><span class="pun">=</span><span class="pln"> filters</span><span class="pun">.</span><span class="pln">gaussian_filter</span><span class="pun">(</span><span class="pln">a</span><span class="pun">,</span><span class="lit">3.0</span><span class="pun">)</span><span class="pln"><br><br></span><span class="com"># convert back to OCRopus</span><span class="pln"><br>result </span><span class="pun">=</span><span class="pln"> ocropy</span><span class="pun">.</span><span class="pln">bytearray</span><span class="pun">().</span><span class="pln">ofI</span><span class="pun">(</span><span class="pln">a</span><span class="pun">)</span><span class="pln"><br><br></span><span class="com"># write to disk</span><span class="pln"><br>result</span><span class="pun">.</span><span class="pln">writeGray</span><span class="pun">(</span><span class="str">"output.png"</span><span class="pun">)</span></a></pre><p><a name="Connecting_with">Here is another example that uses the Pylab display functions: </a></p><pre class="prettyprint"><a name="Connecting_with"><span class="kwd">import</span><span class="pln"> ocropy<br></span><span class="kwd">from</span><span class="pln"> pylab </span><span class="kwd">import</span><span class="pln"> </span><span class="pun">*</span><span class="pln"><br><br></span><span class="com"># read using OCRopus</span><span class="pln"><br>image </span><span class="pun">=</span><span class="pln"> ocropy</span><span class="pun">.</span><span class="pln">bytearray</span><span class="pun">()</span><span class="pln"><br>image</span><span class="pun">.</span><span class="pln">readGray</span><span class="pun">(</span><span class="str">"test.jpg"</span><span class="pun">)</span><span class="pln"><br><br></span><span class="com"># convert to NumPy</span><span class="pln"><br>a </span><span class="pun">=</span><span class="pln"> image</span><span class="pun">.</span><span class="pln">numpyI</span><span class="pun">()</span><span class="pln"><br><br></span><span class="com"># use NumPy (Pylab) display function</span><span class="pln"><br>imshow</span><span class="pun">(</span><span class="pln">a</span><span class="pun">,</span><span class="pln">cmap</span><span class="pun">=</span><span class="pln">cm</span><span class="pun">.</span><span class="pln">gray</span><span class="pun">)</span><span class="pln"><br>show</span><span class="pun">()</span></a></pre><h1><a name="Strings">Strings</a></h1><p><a name="Strings">The
C++ part of the OCRopus library uses some strings in its interfaces.
Currently, you cannot pass in or out regular Python strings, among
other things because C++ strings are writable while Python strings are
not. </a></p><p><a name="Strings">There are two classes for representing strings within OCRopus: <tt>strg</tt> is 8-bit strings, and <tt>ustrg</tt> represents strings of 32-bit unicode codepoints. </a></p><h2><a name="strg">strg</a></h2><p></p><dl><a name="strg"> </a><blockquote><dt><a name="strg"><tt>strg()</tt> 
</a></dt><dd><a name="strg">Constructs an empty string. 
</a></dd><dt><a name="strg"><tt>strg(size)</tt> 
</a></dt><dd><a name="strg">Constructs an uninitialized string of the given size. 
</a></dd><dt><a name="strg"><tt>strg(s)</tt> 
</a></dt><dd><a name="strg">Constructs a string initialized with the given Python string 
</a></dd><dt><a name="strg"><tt>assign(s)</tt> 
</a></dt><dd><a name="strg">Assign a Python string to this string 
</a></dd><dt><a name="strg"><tt>c_str()</tt> 
</a></dt><dd><a name="strg">Return a Python string corresponding to this string 
</a></dd><dt><a name="strg"><tt>length()</tt> 
</a></dt><dd><a name="strg">Return the length of this string 
</a></dd><dt><a name="strg"><tt>at(index)</tt> 
</a></dt><dd><a name="strg">Return the character a index. 
</a></dd></blockquote></dl><a name="strg"> </a><h2><a name="ustrg">ustrg</a></h2><p></p><dl><a name="ustrg"> </a><blockquote><dt><a name="ustrg"><tt>ustrg()</tt> 
</a></dt><dd><a name="ustrg">Constructs an empty string. 
</a></dd><dt><a name="ustrg"><tt>ustrg(size)</tt> 
</a></dt><dd><a name="ustrg">Constructs an uninitialized string of the given size. 
</a></dd><dt><a name="ustrg"><tt>ustrg(s)</tt> 
</a></dt><dd><a name="ustrg">Constructs a string initialized with the given Python string, 
</a><blockquote><a name="ustrg">assumed to be UTF8 encoded. {check} 
</a></blockquote></dd><dt><a name="ustrg"><tt>length()</tt> 
</a></dt><dd><a name="ustrg">Return the length (number of Unicode codepoints) of this string 
</a></dd><dt><a name="ustrg"><tt>clear()</tt> 
</a></dt><dd><a name="ustrg">Assigns the empty string. 
</a></dd><dt><a name="ustrg"><tt>assign(s)</tt> 
</a></dt><dd><a name="ustrg">Assigns the Python string, assumed to be UTF8 encoded {check}. 
</a></dd><dt><a name="ustrg"><tt>ord(index)</tt> 
</a></dt><dd><a name="ustrg">Returns the integer value corresponding to the Unicode codepoint 
</a><blockquote><a name="ustrg">at the given index. 
</a></blockquote></dd><dt><a name="ustrg"><tt>as_string()</tt> 
</a></dt><dd><a name="ustrg">Return a UTF8 encoded version of the string. 
</a></dd><dt><a name="ustrg"><tt>as_intarray(array)</tt> 
</a></dt><dd><a name="ustrg">Store the Unicode codepoints in the given intarray. 
</a></dd></blockquote></dl><a name="ustrg"> </a><p><a name="ustrg">Two conversion functions are not class members: </a></p><p></p><dl><a name="ustrg"> </a><blockquote><dt><a name="ustrg"><tt>unicode2ustrg(a)</tt> 
</a></dt><dd><a name="ustrg">Convert a Python Unicode string to a ustrg and return it. 
</a></dd><dt><a name="ustrg"><tt>ustrg2unicode(s)</tt> 
</a></dt><dd><a name="ustrg">Convert a ustrg to a Python Unicode string and return it. 
</a></dd></blockquote></dl><a name="ustrg"> </a><p><a name="ustrg">Some additional useful string functions are: </a></p><p></p><dl><a name="ustrg"> </a><blockquote><dt><a name="ustrg"><tt>edit_distance(ustrg str1, ustrg str2, float del_cost=1, float ins_cost=1</tt> 
</a></dt><dd><a name="ustrg">Compute edit distance with block moves. 
</a></dd><dt><a name="ustrg"><tt>block_move_edit_cost(ustrg from, ustrg to, float c) -&gt; float</tt> 
</a></dt><dd><a name="ustrg">Compute edit distance with block moves. 
</a></dd><dt><a name="ustrg"><tt>block_move_edit_distance(ustrg a, ustrg b, float c) -&gt; float</tt> 
</a></dt><dd><a name="ustrg">Compute edit distance with block moves. 
</a></dd><dt><a name="ustrg"><tt>block_move_edit_cost_record_jumps(*args)</tt> 
</a></dt><dd><a name="ustrg">Compute edit distance with block moves. 
</a></dd><dt><a name="ustrg"><tt>block_move_edit_cost_record_jumps( jumps_from, jumps_to, ustrg from, ustrg to, float c) -&gt; float</tt> 
</a></dt><dd><a name="ustrg">Compute edit distance with block moves. 
</a></dd><dt><a name="ustrg"><tt>analyze_jumps( area_covered_by_non_jumps, from, to, int source_length)</tt> 
</a></dt><dd><a name="ustrg">Compute edit distance with block moves. 
</a></dd><dd><a name="ustrg">Compute edit distance with block moves. 
</a></dd><dt><a name="ustrg"><tt>get_text_jumped_over(ustrg result, covered, ustrg text)</tt> 
</a></dt><dd><a name="ustrg">Compute edit distance with block moves. 
</a></dd><dt><a name="ustrg"><tt>edit_cost_for_layout( jumps_from, jumps_to, ustrg from, ustrg to, float c) -&gt; float</tt> 
</a></dt><dd><a name="ustrg">Compute edit distance with block moves. 
</a></dd></blockquote></dl><a name="ustrg"> </a><h1><a name="Rectangles">Rectangles</a></h1><p><a name="Rectangles">Rectangles
are used in a number of places in the library. Here is the interface
definition in C++/Swig; the methods should be fairly self-explanatory: </a></p><pre class="prettyprint"><a name="Rectangles"><span class="kwd">struct</span><span class="pln"> rectangle </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">int</span><span class="pln"> x0</span><span class="pun">,</span><span class="pln">y0</span><span class="pun">,</span><span class="pln">x1</span><span class="pun">,</span><span class="pln">y1</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; rectangle</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; rectangle</span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> rectangle </span><span class="pun">&amp;</span><span class="pln">r</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; rectangle</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> x0</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> y0</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> x1</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> y1</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">bool</span><span class="pln"> empty</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">void</span><span class="pln"> pad_by</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> dx</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> dy</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">void</span><span class="pln"> shift_by</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> dx</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> dy</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">int</span><span class="pln"> width</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">int</span><span class="pln"> height</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">void</span><span class="pln"> include</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> x</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> y</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">bool</span><span class="pln"> contains</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> x</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> y</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">bool</span><span class="pln"> contains</span><span class="pun">(</span><span class="pln">point p</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">void</span><span class="pln"> intersect</span><span class="pun">(</span><span class="pln">rectangle other</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">void</span><span class="pln"> include</span><span class="pun">(</span><span class="pln">rectangle other</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; rectangle intersection</span><span class="pun">(</span><span class="pln">rectangle other</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; rectangle inclusion</span><span class="pun">(</span><span class="pln">rectangle other</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; rectangle grow</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> offset</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">int</span><span class="pln"> xcenter</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">int</span><span class="pln"> ycenter</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">int</span><span class="pln"> area</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">bool</span><span class="pln"> overlaps</span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> rectangle </span><span class="pun">&amp;</span><span class="pln">other</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">bool</span><span class="pln"> includes</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> x</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> y</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">bool</span><span class="pln"> includes</span><span class="pun">(</span><span class="kwd">float</span><span class="pln"> x</span><span class="pun">,</span><span class="kwd">float</span><span class="pln"> y</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">bool</span><span class="pln"> includes</span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> rectangle </span><span class="pun">&amp;</span><span class="pln">other</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; rectangle dilated_by</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> dx0</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> dy0</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> dx1</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> dy1</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">float</span><span class="pln"> aspect</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">float</span><span class="pln"> centricity</span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> rectangle </span><span class="pun">&amp;</span><span class="pln">other</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">float</span><span class="pln"> fraction_covered_by</span><span class="pun">(</span><span class="kwd">const</span><span class="pln"> rectangle </span><span class="pun">&amp;</span><span class="pln">other</span><span class="pun">);</span><span class="pln"><br></span><span class="pun">};</span></a></pre><p><a name="Rectangles">Here is a simple Python example: </a></p><pre class="prettyprint"><a name="Rectangles"><span class="pun">&gt;&gt;&gt;</span><span class="pln"> </span><span class="kwd">import</span><span class="pln"> ocropy<br></span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> r </span><span class="pun">=</span><span class="pln"> ocropy</span><span class="pun">.</span><span class="pln">rectangle</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">3</span><span class="pun">,</span><span class="lit">4</span><span class="pun">)</span><span class="pln"><br></span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> s </span><span class="pun">=</span><span class="pln"> ocropy</span><span class="pun">.</span><span class="pln">rectangle</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="lit">2</span><span class="pun">,</span><span class="lit">5</span><span class="pun">,</span><span class="lit">5</span><span class="pun">)</span><span class="pln"><br></span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> r</span><span class="pun">.</span><span class="pln">overlaps</span><span class="pun">(</span><span class="pln">s</span><span class="pun">)</span><span class="pln"><br></span><span class="kwd">True</span><span class="pln"><br></span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> r</span><span class="pun">.</span><span class="pln">aspect</span><span class="pun">()</span><span class="pln"><br></span><span class="lit">1.3333333730697632</span><span class="pln"><br></span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> r</span><span class="pun">.</span><span class="pln">contains</span><span class="pun">(</span><span class="lit">5</span><span class="pun">,</span><span class="lit">5</span><span class="pun">)</span><span class="pln"><br></span><span class="kwd">False</span><span class="pln"><br></span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> r</span><span class="pun">.</span><span class="pln">contains</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">)</span><span class="pln"><br></span><span class="kwd">True</span><span class="pln"><br></span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> q </span><span class="pun">=</span><span class="pln"> r</span><span class="pun">.</span><span class="pln">intersection</span><span class="pun">(</span><span class="pln">s</span><span class="pun">)</span><span class="pln"><br></span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">q</span><span class="pun">.</span><span class="pln">x0</span><span class="pun">,</span><span class="pln">q</span><span class="pun">.</span><span class="pln">y0</span><span class="pun">,</span><span class="pln">q</span><span class="pun">.</span><span class="pln">x1</span><span class="pun">,</span><span class="pln">q</span><span class="pun">.</span><span class="pln">y1</span><span class="pun">)</span><span class="pln"><br></span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">)</span><span class="pln"><br></span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> </span></a></pre><h1><a name="Array_/_Image_Classes">Array / Image Classes</a></h1><h2><a name="allocating">allocating</a></h2><p><a name="allocating">There are four commonly used array types.  You can construct them with these functions.  Note that the type <tt>bytearray</tt> is different from the Python builtin type.  Arrays can have up to rank 4. </a></p><p></p><dl><a name="allocating"> </a><blockquote><dt><a name="allocating"><tt>ocropy.bytearray([d0[,d1[,d2[,d3]]]])</tt> 
</a></dt><dd><a name="allocating">Allocate an array of unsigned bytes with the given dimensions. 
</a></dd></blockquote><blockquote><dt><a name="allocating"><tt>ocropy.intarray([d0[,d1[,d2[,d3]]]])</tt> 
</a></dt><dd><a name="allocating">Allocate an array of 32bit integers with the given dimensions. 
</a></dd></blockquote><blockquote><dt><a name="allocating"><tt>ocropy.floatarray([d0[,d1[,d2[,d3]]]])</tt> 
</a></dt><dd><a name="allocating">Allocate an array of 32 bit floating point numbers with the 
given dimensions 
</a></dd></blockquote><blockquote><dt><a name="allocating"><tt>ocropy.rectarray([d0[,d1[,d2[,d3]]]])</tt> 
</a></dt><dd><a name="allocating">Allocate an array of rectangles with the given dimensions. 
</a></dd></blockquote><p></p></dl><a name="allocating"> </a><p><a name="allocating">The following are member functions that also allocate arrays in some way or another. </a></p><p></p><dl><a name="allocating"> </a><blockquote><dt><a name="allocating"><tt>copy(self,other)</tt> 
</a></dt><dd><a name="allocating">Copy the contents of the other array into this array. 
</a></dd></blockquote><blockquote><dt><a name="allocating"><tt>swap(self,other)</tt> 
</a></dt><dd><a name="allocating">Swap the contents of this array with the contents of the other array. 
</a><blockquote><a name="allocating">(fast, pointer-based.) 
</a></blockquote></dd></blockquote><blockquote><dt><a name="allocating"><tt>move(self,other)</tt> 
</a></dt><dd><a name="allocating">Moving the contents of the other array into this array, clearing the 
</a><blockquote><a name="allocating">other array in the process.  (Fast, pointer-based.) 
</a></blockquote></dd></blockquote><blockquote><dt><a name="allocating"><tt>new(self)</tt> 
</a></dt><dd><a name="allocating">Allocate and return a new, empty array of the same type as this array. 
</a></dd></blockquote><blockquote><dt><a name="allocating"><tt>duplicate(self)</tt> 
</a></dt><dd><a name="allocating">Duplicate the current array and return it. 
</a></dd></blockquote><blockquote><dt><a name="allocating"><tt>refcount(self)</tt> 
</a></dt><dd><a name="allocating">Returns the Python reference count of this array. 
</a></dd></blockquote><blockquote><dt><a name="allocating"><tt>clear(self)</tt> 
</a></dt><dd><a name="allocating">Clear the contents of this array. 
</a></dd></blockquote><blockquote><dt><a name="allocating"><tt>resize(self,d0,...)</tt> 
</a></dt><dd><a name="allocating">Resize the array to the given size. Previous contents may be lost. 
</a></dd></blockquote><blockquote><dt><a name="allocating"><tt>makelike(self, other)</tt> 
</a></dt><dd><a name="allocating">Resize the array to the same size as the other array. 
</a></dd></blockquote><blockquote><dt><a name="allocating"><tt>reshape(self,d0,...)</tt> 
</a></dt><dd><a name="allocating">Reshape the array to the given size.  The new length must equal the old length. 
</a></dd></blockquote><p></p></dl><a name="allocating"> </a><h2><a name="subscripting">subscripting</a></h2><p></p><dl><a name="subscripting"> </a><blockquote><dt><a name="subscripting"><tt>length(self)</tt> 
</a></dt><dd><a name="subscripting">Returns the total length of the array. 
</a></dd></blockquote><blockquote><dt><a name="subscripting"><tt>rank(self)</tt> 
</a></dt><dd><a name="subscripting">Returns the array rank. 
</a></dd></blockquote><blockquote><dt><a name="subscripting"><tt>dim(self,i)</tt> 
</a></dt><dd><a name="subscripting">Returns the extent of dimension i 
</a></dd></blockquote><blockquote><dt><a name="subscripting"><tt>dims(self)</tt> 
</a></dt><dd><a name="subscripting">Returns a list of all dimensions. 
</a></dd></blockquote><blockquote><dt><a name="subscripting"><tt>__getitem__(self, index)</tt> 
</a></dt><dd><a name="subscripting">Subscripting. Can be used to retrieve elements. Also supports  
</a><blockquote><a name="subscripting">some slicing (currently, only <tt>a[u:v,s:t]</tt> is supported) 
</a></blockquote></dd></blockquote><blockquote><dt><a name="subscripting"><tt>__setitem__(self, index, value)</tt> 
</a></dt><dd><a name="subscripting">Subscripting. Can be used to retrieve elements. Also supports some slicing (currently,  
</a><blockquote><a name="subscripting">only <tt>a[u:v,s:t] = array</tt> and <tt>a[u:v,s:t] = value</tt> are supported) 
</a></blockquote></dd></blockquote><blockquote><dt><a name="subscripting"><tt>extract(self, x0, y0, x1, y1)</tt> 
</a></dt><dd><a name="subscripting">Extract a subrectangle from an image. 
</a></dd></blockquote><blockquote><dt><a name="subscripting"><tt>bextract(self, x0, y0, x1, y1, value)</tt> 
</a></dt><dd><a name="subscripting">Extract a subractangle, filling in values outside the boundary. 
</a></dd></blockquote><blockquote><dt><a name="subscripting"><tt>at(self,i0,...)</tt> 
</a></dt><dd><a name="subscripting">Return the element at the given index. 
</a></dd></blockquote><blockquote><dt><a name="subscripting"><tt>put(self,i0,...,value)</tt> 
</a></dt><dd><a name="subscripting">Update the element at the given index 
</a></dd></blockquote><blockquote><dt><a name="subscripting"><tt>at1d(self,i)</tt> 
</a></dt><dd><a name="subscripting">Return the element at the given index, treating the array as a 1D array. 
</a></dd></blockquote><blockquote><dt><a name="subscripting"><tt>put1d(self,i,value)</tt> 
</a></dt><dd><a name="subscripting">Update the element at the given index, treating the array as a 1D array. 
</a></dd></blockquote><blockquote><dt><a name="subscripting"><tt>fill(self,value)</tt> 
</a></dt><dd><a name="subscripting">Fill the array with the given value. 
</a></dd></blockquote><blockquote><dt><a name="subscripting"><tt>ext(self, *args)</tt> 
</a></dt><dd><a name="subscripting">Returns a pixel, extending at the boundary. 
</a></dd></blockquote><blockquote><dt><a name="subscripting"><tt>bat(self, *args)</tt> 
</a></dt><dd><a name="subscripting">Returns a pixel, picking a fixed value outside the boundary. 
</a></dd></blockquote><blockquote><dt><a name="subscripting"><tt>bilin(self, x, y)</tt> 
</a></dt><dd><a name="subscripting">Returns a pixel with bilinear interpolation. 
</a></dd></blockquote><blockquote><dt><a name="subscripting"><tt>xref(self, x, y)</tt> 
</a></dt><dd></dd><a name="subscripting"> 
</a></blockquote><p></p></dl><a name="subscripting"> </a><h2><a name="converting">converting</a></h2><p></p><dl><a name="converting"> </a><blockquote><dt><a name="converting"><tt>numpy(self)</tt> 
</a></dt><dd><a name="converting">Convert an narray to a numpy array. 
</a></dd></blockquote><blockquote><dt><a name="converting"><tt>of(self, image)</tt> 
</a></dt><dd><a name="converting">Assign a numpy array to this narray; returns self. 
</a></dd></blockquote><blockquote><dt><a name="converting"><tt>byte(self)</tt> 
</a></dt><dd><a name="converting">Return a bytearray version of the current array. 
</a></dd></blockquote><blockquote><dt><a name="converting"><tt>int(self)</tt> 
</a></dt><dd><a name="converting">Return an intarray version of the current array. 
</a></dd></blockquote><blockquote><dt><a name="converting"><tt>float(self)</tt> 
</a></dt><dd><a name="converting">Return an floatarray version of the current array. 
</a></dd></blockquote><blockquote><dt><a name="converting"><tt>numpyI(self)</tt> 
</a></dt><dd><a name="converting">Convert an narray to a numpy array, accounting for different 
</a><blockquote><a name="converting">coordinate conventions in images. 
</a></blockquote></dd></blockquote><blockquote><dt><a name="converting"><tt>ofI(self, image)</tt> 
</a></dt><dd><a name="converting">Assign a numpy array to this narray; returns self. 
</a></dd></blockquote><p></p></dl><a name="converting"> </a><h2><a name="searching">searching</a></h2><p></p><dl><a name="searching"> </a><blockquote><dt><a name="searching"><tt>indexOf(self, elt)</tt> 
</a></dt><dd><a name="searching">Find the index of the given element. 
</a></dd></blockquote><blockquote><dt><a name="searching"><tt>contains(self, elt)</tt> 
</a></dt><dd><a name="searching">Check whether the array contains the given element. 
</a></dd></blockquote><blockquote><dt><a name="searching"><tt>countOf(self, elt)</tt> 
</a></dt><dd><a name="searching">Number of times the element occurs in the given array. 
</a></dd></blockquote><blockquote><dt><a name="searching"><tt>append(self,other)</tt> 
</a></dt><dd><a name="searching">Append the other array to this array. 
</a></dd></blockquote><blockquote><dt><a name="searching"><tt>reverse(self)</tt> 
</a></dt><dd><a name="searching">Reverse the elements of the array. 
</a></dd></blockquote><blockquote><dt><a name="searching"><tt>removeLeft(self, x)</tt> 
</a></dt><dd><a name="searching">... 
</a></dd></blockquote><blockquote><dt><a name="searching"><tt>removeElement(self, i)</tt> 
</a></dt><dd><a name="searching">Remove element i 
</a></dd></blockquote><blockquote><dt><a name="searching"><tt>removeValue(self, x)</tt> 
</a></dt><dd><a name="searching">Remove value x 
</a></dd></blockquote><blockquote><dt><a name="searching"><tt>insertAt(self, i, v)</tt> 
</a></dt><dd><a name="searching">Insert value v at location i. 
</a></dd></blockquote><blockquote><dt><a name="searching"><tt>iota(self, n)</tt> 
</a></dt><dd><a name="searching">Assign the values of 0...n-1 to this array, then return the self. 
</a></dd></blockquote><blockquote><dt><a name="searching"><tt>randomly_permute(self)</tt> 
</a></dt><dd><a name="searching">Randomly permute the elements of this array. 
</a></dd></blockquote><p></p></dl><a name="searching"> </a><h2><a name="arithmetic_and_logic">arithmetic and logic</a></h2><p></p><dl><a name="arithmetic_and_logic">  	 </a><blockquote><dt><a name="arithmetic_and_logic"><tt>+= -= *= /= //= **= %=&lt;&lt;= &gt;&gt;= &amp;= |= ^=</tt> 
</a></dt><dd><a name="arithmetic_and_logic">Assignment operators.  (Note that subscripting returns a copy, 
</a><blockquote><a name="arithmetic_and_logic">so that <tt>a[3:4,5:6] += 3</tt> 
does not modify a.)  
</a></blockquote></dd></blockquote><blockquote><dt><a name="arithmetic_and_logic"><tt>+ - * / // % | &amp; ^ ** &lt;&lt; &gt;&gt;</tt> 
</a></dt><dd><a name="arithmetic_and_logic">Infix arithmetic operators. 
</a></dd></blockquote><blockquote><dt><a name="arithmetic_and_logic"><tt>x.abs() x.pos() x.neg() x.invert()</tt> 
</a></dt><dd><a name="arithmetic_and_logic">Elementwise in-place operations. 
</a></dd></blockquote><blockquote><dt><a name="arithmetic_and_logic"><tt>abs(x) +x -x ~x</tt> 
</a></dt><dd><a name="arithmetic_and_logic">Elementwise operations. 
</a></dd></blockquote><blockquote><dt><a name="arithmetic_and_logic"><tt>x.log_() x.exp_() x.sin_() x.cos_()</tt> 
</a></dt><dd><a name="arithmetic_and_logic">Elementwise in-place operations. 
</a></dd></blockquote><blockquote><dt><a name="arithmetic_and_logic"><tt>log, exp, sin, cos</tt> 
</a></dt><dd><a name="arithmetic_and_logic">Elementwise operations. 
</a></dd></blockquote><blockquote><dt><a name="arithmetic_and_logic"><tt>greater_(self, q, x, y) less_(self, q, x, y)</tt> 
</a></dt><dd><a name="arithmetic_and_logic">Where self is less than q, assign x, otherwise y.  Modifies the array in-place. 
</a></dd></blockquote><blockquote><dt><a name="arithmetic_and_logic"><tt>min_(self, other=None) max_(self, other=None)</tt> 
</a></dt><dd><a name="arithmetic_and_logic">With no argument, returns the max of the array. With one argument, 
</a><blockquote><a name="arithmetic_and_logic">computes the max of this array with the other array in-place. 
</a></blockquote></dd><a name="arithmetic_and_logic"> 
</a></blockquote><blockquote><dt><a name="arithmetic_and_logic"><tt>greater(self, q, x, y) less(self, q, x, y)</tt> 
</a></dt><dd><a name="arithmetic_and_logic">Where self is less than q, assign x, otherwise y; returns a new array. 
</a></dd></blockquote><blockquote><dt><a name="arithmetic_and_logic"><tt>min(self, other=None) max(self, other=None)</tt> 
</a></dt><dd><a name="arithmetic_and_logic">With no argument, returns the max of the array. With one argument, 
</a><blockquote><a name="arithmetic_and_logic">computes the max of this array with the other array and returns it. 
</a></blockquote></dd></blockquote><blockquote><dt><a name="arithmetic_and_logic"><tt>sum(self) product(self)</tt> 
</a></dt><dd><a name="arithmetic_and_logic">Returns the sum/product of all the array elements. 
</a></dd></blockquote><blockquote><dt><a name="arithmetic_and_logic"><tt>argmax(self) argmin(self)</tt> 
</a></dt><dd><a name="arithmetic_and_logic">Returns the 1D index of the largest/smallest element. 
</a></dd></blockquote><blockquote><dt><a name="arithmetic_and_logic"><tt>norm2(self)</tt> 
</a></dt><dd><a name="arithmetic_and_logic">Returns the 2-norm of the array. 
</a></dd></blockquote><blockquote><dt><a name="arithmetic_and_logic"><tt>dist2(self, other)</tt> 
</a></dt><dd><a name="arithmetic_and_logic">Returns the Euclidean distance of the two arrays. 
</a></dd></blockquote><blockquote><dt><a name="arithmetic_and_logic"><tt>clamp(self, lo, hi)</tt> 
</a></dt><dd><a name="arithmetic_and_logic">Clamp the values of the array between lo and hi. 
</a><blockquote><a name="arithmetic_and_logic">The array is updated in-place. 
</a></blockquote></dd><a name="arithmetic_and_logic"> 
</a></blockquote><blockquote><dt><a name="arithmetic_and_logic"><tt>clampScale(self, other, lo, hi)</tt> 
</a></dt><dd><a name="arithmetic_and_logic">Scale the array by multiplying with other, 
</a><blockquote><a name="arithmetic_and_logic">then clamp the result between lo and hi. The array 
is updated in-place. 
</a></blockquote></dd></blockquote><blockquote><dt><a name="arithmetic_and_logic"><tt>containsOnly(self, *args)</tt> 
</a></dt><dd><a name="arithmetic_and_logic">Check that the array contains only the given values 
</a><blockquote><a name="arithmetic_and_logic">(give one or two arguments). 
</a></blockquote></dd></blockquote><blockquote><dt><a name="arithmetic_and_logic"><tt>addScaled(self, other, x)</tt> 
</a></dt><dd><a name="arithmetic_and_logic">Add a scaled version of ther array to this array. 
</a></dd></blockquote><blockquote><dt><a name="arithmetic_and_logic"><tt>makeUnitVector(self, i, n)</tt> 
</a></dt><dd><a name="arithmetic_and_logic">Make this array a unit vector of length n, with a 1 in position i. 
</a></dd></blockquote><blockquote><dt><a name="arithmetic_and_logic"><tt>normalize2(self)</tt> 
</a></dt><dd><a name="arithmetic_and_logic">Divide the elements of this array by the 2-norm. 
</a></dd></blockquote><p></p></dl><a name="arithmetic_and_logic"> </a><h2><a name="image-related_operations">image-related operations</a></h2><p></p><dl><a name="image-related_operations"> </a><blockquote><dt><a name="image-related_operations"><tt>readGray(self, file)</tt> 
</a></dt><dd><a name="image-related_operations">Read an image as grayscale (always makes the array rank 2). 
</a></dd></blockquote><blockquote><dt><a name="image-related_operations"><tt>readRgb(self, file)</tt> 
</a></dt><dd><a name="image-related_operations">Read an image as color (always makes the array rank 3). 
</a></dd></blockquote><p><a name="image-related_operations">   </a></p><blockquote><dt><a name="image-related_operations"><tt>readPacked(self, file)</tt> 
</a></dt><dd><a name="image-related_operations">Read an image as packed RGB (always makes the array rank 2). 
</a></dd></blockquote><a name="image-related_operations">   </a><blockquote><dt><a name="image-related_operations"><tt>readBinary(self, file)</tt> 
</a></dt><dd><a name="image-related_operations">Read an image as binary (always makes the array rank 2). 
</a></dd></blockquote><a name="image-related_operations">   </a><blockquote><dt><a name="image-related_operations"><tt>writeGray(self, file)</tt> 
</a></dt><dd><a name="image-related_operations">Write the array as a grayscale image. 
</a></dd></blockquote><a name="image-related_operations">   </a><blockquote><dt><a name="image-related_operations"><tt>writeRgb(self, file)</tt> 
</a></dt><dd><a name="image-related_operations">Write the array as an RGB image. 
</a></dd></blockquote><a name="image-related_operations">   </a><blockquote><dt><a name="image-related_operations"><tt>writePacked(self, file)</tt> 
</a></dt><dd><a name="image-related_operations">Write the array as a packed RGB image. 
</a></dd></blockquote><a name="image-related_operations">   </a><blockquote><dt><a name="image-related_operations"><tt>writeBinary(self, file)</tt> 
</a></dt><dd><a name="image-related_operations">Write the array as a binary image. 
</a></dd></blockquote><a name="image-related_operations">   </a><blockquote><dt><a name="image-related_operations"><tt>tighten(self)</tt> 
</a></dt><dd><a name="image-related_operations">Crop zero values around the outside of the array. 
</a></dd></blockquote><a name="image-related_operations">   </a><blockquote><dt><a name="image-related_operations"><tt>cirularPermute(self, dx, dy)</tt> 
</a></dt><dd><a name="image-related_operations">Shift the values of the array by dx,dy, using circular boundary conditions. 
</a><blockquote><a name="image-related_operations">The array is modified in-place. 
</a></blockquote></dd></blockquote><a name="image-related_operations">   </a><blockquote><dt><a name="image-related_operations"><tt>shiftBy(self, dx, dy, value=0)</tt> 
</a></dt><dd><a name="image-related_operations">Shift the values of the array by dx,dy, using a default value at the boundary. 	 
</a><blockquote><a name="image-related_operations">The array is modified in-place. 
</a></blockquote></dd></blockquote><a name="image-related_operations">   </a><blockquote><dt><a name="image-related_operations"><tt>padBy(self, dx, dy, value=0)</tt> 
</a></dt><dd><a name="image-related_operations">Pad the array by the given amounts (positive or negative). 
</a></dd></blockquote><a name="image-related_operations">   </a><blockquote><dt><a name="image-related_operations"><tt>eraseBoundary(self, dx, dy, value=0)</tt> 
</a></dt><dd><a name="image-related_operations">Fill values around the boundary with the given value. 
</a></dd></blockquote><a name="image-related_operations">   </a><blockquote><dt><a name="image-related_operations"><tt>resizeTo(self, w, h, value=0)</tt> 
</a></dt><dd><a name="image-related_operations">Resize the image to the given size, filling values 
</a><blockquote><a name="image-related_operations">around the boundary with the given default. 	 
</a></blockquote></dd><a name="image-related_operations"> 
<dt><tt>ifelse(iftrue, iffalse)</tt></dt> 
<dd>Use this array to select between the iftrue and iffalse 
<blockquote>arrays and return the result. 
</blockquote></dd></a></blockquote><a name="image-related_operations">   </a><blockquote><dt><a name="image-related_operations"><tt>gammaTransform(self, gamma, c, lo, hi)</tt> 
</a></dt><dd><a name="image-related_operations">Perform a gamma transform. 
</a></dd></blockquote><a name="image-related_operations">   </a><blockquote><dt><a name="image-related_operations"><tt>expandRange(self, lo, hi)</tt> 
</a></dt><dd><a name="image-related_operations">Expand the range of the image to fall between lo and hi. 
</a></dd></blockquote><a name="image-related_operations">   </a><blockquote><dt><a name="image-related_operations"><tt>cropRectangle(self, *args)</tt> 
</a></dt><dd><a name="image-related_operations">Crop this image to the given rectangle. 
</a><blockquote><a name="image-related_operations">The rectangle is given either as a rectangle object 
or as x0,y0,x1,y1 
</a></blockquote></dd></blockquote><a name="image-related_operations">   </a><blockquote><dt><a name="image-related_operations"><tt>crop(self, x0, y0, x1, y1)</tt> 
</a></dt><dd><a name="image-related_operations">Crop this image to the given rectangle. 
</a></dd></blockquote><a name="image-related_operations">   </a><blockquote><dt><a name="image-related_operations"><tt>transpose(self)</tt> 
</a></dt><dd><a name="image-related_operations">Transpose this image. 
</a></dd></blockquote><a name="image-related_operations">   </a><blockquote><dt><a name="image-related_operations"><tt>replaceValues(old, new)</tt> 
</a></dt><dd><a name="image-related_operations">Replace the old value with the new value in this image. 
</a></dd></blockquote><a name="image-related_operations">   </a><blockquote><dt><a name="image-related_operations"><tt>threshold(self, t)</tt> 
</a></dt><dd><a name="image-related_operations">Threshold this image with the given threshold. 
</a></dd></blockquote><a name="image-related_operations">   </a><blockquote><dt><a name="image-related_operations"><tt>copyRectangle(self, x, y, src, x0, y0, x1, y1)</tt> 
</a></dt><dd><a name="image-related_operations">Copy the given source rectangle from the source 
</a><blockquote><a name="image-related_operations">image to this image at position x,y. 
</a></blockquote></dd></blockquote><a name="image-related_operations">   </a><blockquote><dt><a name="image-related_operations"><tt>rotate(angle, cx=None, cy=None, interpolate=1, direct=1)</tt> 
</a></dt><dd><a name="image-related_operations">Rotate this image using a variety of methods. 
</a></dd></blockquote><blockquote><a name="image-related_operations">cx,cy set the center of the rotation 
</a></blockquote><blockquote><a name="image-related_operations">Angles of 0.0,90.0,180.0,270.0 with the default cx,cy 
</a></blockquote><blockquote><a name="image-related_operations">use special, fast implementations. 
</a></blockquote><blockquote><a name="image-related_operations">When interpolate=1 is set, uses bilinear interpolation, sampling otherwise. 
</a></blockquote><blockquote><a name="image-related_operations">When direct=1 is set, uses direct rotation, skew-based rotation otherwise. 
</a></blockquote><p><a name="image-related_operations">   </a></p><blockquote><dt><a name="image-related_operations"><tt>scale(sx, sy=None, interpolate=1)</tt> 
</a></dt><dd><a name="image-related_operations">Scale this image using a variety of methods. 
</a></dd></blockquote><blockquote><a name="image-related_operations">When interpolate=1 is set, uses bilinear interpolation, sampling otherwise. 
</a></blockquote><blockquote><a name="image-related_operations">When direct=1 is set, uses direct rotation, skew-based rotation otherwise. 
</a></blockquote><p><a name="image-related_operations">   </a></p><blockquote><dt><a name="image-related_operations"><tt>scaleTo(nx, ny=None, interpolate=1)</tt> 
</a></dt><dd><a name="image-related_operations">Scale this image to the given target size. 	 
</a></dd></blockquote><blockquote><a name="image-related_operations">When interpolate=1 is set, uses bilinear interpolation, sampling otherwise. 
</a></blockquote><blockquote><a name="image-related_operations">When direct=1 is set, uses direct rotation, skew-based rotation otherwise. 
</a></blockquote><p><a name="image-related_operations">   </a></p><blockquote><dt><a name="image-related_operations"><tt>splitRGB(self)</tt> 
</a></dt><dd><a name="image-related_operations">Split this image into r,g,b channels and return them. 
</a></dd></blockquote><a name="image-related_operations">   </a><blockquote><dt><a name="image-related_operations"><tt>combineRGB(r, g, b)</tt> 
</a></dt><dd><a name="image-related_operations">Combine the three r,g,b channels into this image. Returns self. 
</a></dd></blockquote><p><a name="image-related_operations">   </a></p><blockquote><dt><a name="image-related_operations"><tt>math2raster(self)</tt> 
</a></dt><dd><a name="image-related_operations">Update this image from mathematical coordinates (<tt>a[x,y]</tt>) 
</a><blockquote><a name="image-related_operations">to raster coordinates (<tt>a[row,col]</tt>). 
</a></blockquote></dd></blockquote><a name="image-related_operations">   </a><blockquote><dt><a name="image-related_operations"><tt>raster2math(self)</tt> 
</a></dt><dd><a name="image-related_operations">Update this image from raster coordinates (<tt>a[row,col]</tt>) 
</a><blockquote><a name="image-related_operations">to mathematical coordinates (<tt>a[x,y]</tt>). 
</a></blockquote></dd></blockquote><a name="image-related_operations">   </a><blockquote><dt><a name="image-related_operations"><tt>fillRectangle(self, *args)</tt> 
</a></dt><dd><a name="image-related_operations">Fill the given rectangle with the given value. 
</a><blockquote><a name="image-related_operations">Invoke either as a.fillRecangle(r,value) or a.fillRectangle(x0,y0,x1,y1,value). 
</a></blockquote></dd></blockquote><blockquote><dt><a name="image-related_operations"><tt>gauss(self, s, sy=None)</tt> 
</a></dt><dd><a name="image-related_operations">Perform Gaussian convolution. 
</a></dd></blockquote><p><a name="image-related_operations">   </a></p><blockquote><dt><a name="image-related_operations"><tt>localMinima(self)</tt> 
</a></dt><dd><a name="image-related_operations">Compute a map of local minima and return them as a bytearray. 
</a></dd></blockquote><a name="image-related_operations">   </a><blockquote><dt><a name="image-related_operations"><tt>localMaxima(self)</tt> 
</a></dt><dd><a name="image-related_operations">Compute a map of local maxima and return them as a bytearray. 
</a></dd></blockquote><a name="image-related_operations">   </a><blockquote><dt><a name="image-related_operations"><tt>zerocrossings(self)</tt> 
</a></dt><dd><a name="image-related_operations">Compute a map of zerocrossings and return them as a bytearray. 
</a></dd></blockquote><a name="image-related_operations">   </a><blockquote><dt><a name="image-related_operations"><tt>medianFilter(self, rx, ry)</tt> 
</a></dt><dd><a name="image-related_operations">Compute the median filter in-place. 
</a></dd></blockquote><a name="image-related_operations">   </a><blockquote><dt><a name="image-related_operations"><tt>corners(self, method='kr2')</tt> 
</a></dt><dd><a name="image-related_operations">Find corners in this image. Method Details 
</a></dd></blockquote></dl><a name="image-related_operations"> </a><h1><a name="Other_Algorithms">Other Algorithms</a></h1><h2><a name="Segmentations">Segmentations</a></h2><p></p><dl><a name="Segmentations"> </a><blockquote><dt><a name="Segmentations"><tt>make_line_segmentation_black(a)</tt> 
</a></dt><dt><a name="Segmentations"><tt>make_line_segmentation_white(a)</tt> 
</a></dt><dt><a name="Segmentations"><tt>make_page_segmentation_black(a)</tt> 
</a></dt><dt><a name="Segmentations"><tt>make_page_segmentation_white(a)</tt> 
</a></dt></blockquote></dl><a name="Segmentations"> </a><h2><a name="Image_Processing_and_Feature_Extraction">Image Processing and Feature Extraction</a></h2><p></p><dl><a name="Image_Processing_and_Feature_Extraction"> </a><blockquote><dt><a name="Image_Processing_and_Feature_Extraction"><tt>skeletal_features( endpoints, junctions, image, float presmooth=0.0)</tt> 
</a></dt><dt><a name="Image_Processing_and_Feature_Extraction"><tt>skeletal_feature_counts(int nendpoints, int njunctions, image, float presmooth=0.0</tt> 
</a></dt><dt><a name="Image_Processing_and_Feature_Extraction"><tt>count_neighbors(*args)</tt> 
</a></dt><dt><a name="Image_Processing_and_Feature_Extraction"><tt>count_neighbors(colib::bytearray result, colib::bytearray image)</tt> 
</a></dt><dt><a name="Image_Processing_and_Feature_Extraction"><tt>find_endpoints(*args)</tt> 
</a></dt><dt><a name="Image_Processing_and_Feature_Extraction"><tt>find_endpoints(colib::bytearray result, colib::bytearray image)</tt> 
</a></dt><dt><a name="Image_Processing_and_Feature_Extraction"><tt>find_junctions(*args)</tt> 
</a></dt><dt><a name="Image_Processing_and_Feature_Extraction"><tt>find_junctions(colib::bytearray result, colib::bytearray image)</tt> 
</a></dt><dt><a name="Image_Processing_and_Feature_Extraction"><tt>remove_singular_points(*args)</tt> 
</a></dt><dt><a name="Image_Processing_and_Feature_Extraction"><tt>remove_singular_points(colib::bytearray image, int d)</tt> 
</a></dt><dt><a name="Image_Processing_and_Feature_Extraction"><tt>average_on_border(a)</tt> 
</a></dt><dt><a name="Image_Processing_and_Feature_Extraction"><tt>binarize_simple(result, image)</tt> 
</a></dt><dt><a name="Image_Processing_and_Feature_Extraction"><tt>binarize_simple( image) -&gt; int</tt> 
</a></dt><dt><a name="Image_Processing_and_Feature_Extraction"><tt>binarize_with_threshold(*args)</tt> 
</a></dt><dt><a name="Image_Processing_and_Feature_Extraction"><tt>binarize_with_threshold( out, in, int threshold) binarize_with_threshold( in, int threshold)</tt> 
</a></dt><dt><a name="Image_Processing_and_Feature_Extraction">runlength_histogram( hist, img, rectangle box, bool white=False, bool vert=False) 
</a></dt><dt><a name="Image_Processing_and_Feature_Extraction"><tt>estimate_linesize(
image, float f=0.5, float minsize=5.0) -&gt; float estimate_linesize(
image, float f=0.5) -&gt; float estimate_linesize( image) -&gt; float</tt> 
</a></dt><dt><a name="Image_Processing_and_Feature_Extraction"><tt>estimate_strokewidth( image, float f=0.6) -&gt; float estimate_strokewidth( image) -&gt; float)</tt> 
</a></dt><dt><a name="Image_Processing_and_Feature_Extraction"><tt>estimate_size_by_box( image, float f=0.5) -&gt; float estimate_size_by_box( image) -&gt; float)</tt> 
</a></dt></blockquote><p><span class="error"><a name="Image_Processing_and_Feature_Extraction">Unknown end tag for &lt;/dl&gt;</a></span></p><a name="Image_Processing_and_Feature_Extraction"> </a><h1><a name="Finite_State_Transducers">Finite State Transducers</a></h1><p></p><dl><a name="Finite_State_Transducers"> </a><blockquote><dt><a name="Finite_State_Transducers"><tt>scale_fst(OcroFST ?, float ?)</tt> 
</a></dt><dt><a name="Finite_State_Transducers"><tt>beam_search(*args)</tt> 
</a></dt><dt><a name="Finite_State_Transducers"><tt>beam_search(ustrg s, IGenericFst u, IGenericFst v, int n) -&gt; double)</tt> 
</a></dt><dt><a name="Finite_State_Transducers"><tt>align_segmentation(*args)</tt> 
</a></dt><dt><a name="Finite_State_Transducers"><tt>align_segmentation( segmentation, rectarray bboxes)</tt> 
</a></dt></blockquote></dl><a name="Finite_State_Transducers"> 
 </a></dl></td> 
 </tr>
 </tbody></table>
 </div>


 
 
 
 
 <br>
 <div class="artifactcomment">
 <span class="indicator">â–º</span> <a href="https://www.google.com/accounts/ServiceLogin?service=code&amp;ltmpl=phosting&amp;continue=http%3A%2F%2Fcode.google.com%2Fp%2Focropus%2Fwiki%2FLibraryReference&amp;followup=http%3A%2F%2Fcode.google.com%2Fp%2Focropus%2Fwiki%2FLibraryReference">Sign in</a> to add a comment
 </div>
 
 

<form name="delcom" action="../w/delComment.do" method="POST">
 <input name="sequence_num" value="" type="hidden">
 <input name="mode" value="" type="hidden">
 <input name="pagename" value="LibraryReference" type="hidden">
 <input name="token" value="" type="hidden">
</form>



<script src="LibraryReference_files/prettify.js"></script>
<script type="text/javascript">
 prettyPrint();
</script>
<script type="text/javascript" src="LibraryReference_files/dit_scripts_20081013.js"></script>



  
 
 <script type="text/javascript" src="LibraryReference_files/core_scripts_20081103.js"></script>
 <script type="text/javascript" src="LibraryReference_files/codesite_product_dictionary_ph.js"></script>
 </div>
<div id="footer" dir="ltr">
 
 <div class="text">
 
 Â©2010 Google -
 <a href="http://code.google.com/projecthosting/terms.html">Terms</a> -
 <a href="http://www.google.com/privacy.html">Privacy</a> -
 <a href="http://code.google.com/p/support/">Project Hosting Help</a>
 
 </div>
</div>

 <div class="hostedBy" style="margin-top: -20px;">
 <span style="vertical-align: top;">Powered by <a href="http://code.google.com/projecthosting/">Google Project Hosting</a></span>
 </div>
 
 


 
 <div style="display: none;" id="menuDiv-projects-dropdown" class="menuDiv instance0"><div class="menuCategory controls"><a href="http://www.google.com/accounts/ServiceLogin?service=code&amp;ltmpl=phosting&amp;continue=http%3A%2F%2Fcode.google.com%2Fp%2Focropus%2Fwiki%2FLibraryReference&amp;amp;followup=http%3A%2F%2Fcode.google.com%2Fp%2Focropus%2Fwiki%2FLibraryReference" style="display: block;" class="menuItem">Sign in to see your favorites</a><hr class="menuSeparator"><a href="http://code.google.com/more/" style="display: block;" class="menuItem">Find developer products...</a><a href="http://code.google.com/hosting/" style="display: block;" class="menuItem">Find open source projects...</a></div></div></body></html>